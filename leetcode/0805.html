<!DOCTYPE html>
<html lang="en"><head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Leetcode 0805 Split Array With Same Average | Dmitry Babichev’s webpage</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Leetcode 0805 Split Array With Same Average" />
<meta name="author" content="Dmitry Babichev" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Problem statement" />
<meta property="og:description" content="Problem statement" />
<meta property="og:site_name" content="Dmitry Babichev’s webpage" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-12-05T21:29:46+03:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Leetcode 0805 Split Array With Same Average" />
<script type="application/ld+json">
{"url":"/leetcode/0805.html","@type":"BlogPosting","headline":"Leetcode 0805 Split Array With Same Average","dateModified":"2021-12-05T21:29:46+03:00","datePublished":"2021-12-05T21:29:46+03:00","mainEntityOfPage":{"@type":"WebPage","@id":"/leetcode/0805.html"},"author":{"@type":"Person","name":"Dmitry Babichev"},"description":"Problem statement","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Dmitry Babichev's webpage" />
    






  
  
</head>

    
    <!-- for mathjax support -->
    
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Dmitry Babichev&#39;s webpage</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/leetcode%20problems/">Leetcode problems</a><a class="page-link" href="/coding%20ideas/">Patterns</a><a class="page-link" href="/coding%20ideas%202/">Patterns 2</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <span>[
  
    
    <a href="/tag/dp"><code class="highligher-rouge"><nobr>dp</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/array"><code class="highligher-rouge"><nobr>array</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/math"><code class="highligher-rouge"><nobr>math</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/bit manipulation"><code class="highligher-rouge"><nobr>bit manipulation</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/meed in the middle"><code class="highligher-rouge"><nobr>meed in the middle</nobr></code>&nbsp;</a>
  
]</span>

<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Leetcode 0805 Split Array With Same Average</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-12-05T21:29:46+03:00" itemprop="datePublished">
        Dec 5, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h4 id="problem-statement">Problem statement</h4>

<p><a href="https://leetcode.com/problems/split-array-with-same-average/"> <font color="blue">https://leetcode.com/problems/split-array-with-same-average/</font></a></p>

<h4 id="solution-1">Solution 1</h4>
<p>First of all note, that given condition is equivalent to the following: average of elements in <code class="language-plaintext highlighter-rouge">A</code> is equal to average of all elements. Now, if we subtract average of <code class="language-plaintext highlighter-rouge">A</code> from each element, we need to find such group <code class="language-plaintext highlighter-rouge">B</code>, which have sum of elements equal to zero. There are <code class="language-plaintext highlighter-rouge">2^30</code> possible subsets of set <code class="language-plaintext highlighter-rouge">A</code>, which is quite big, but we can do the following: find all possible sums for fist half and for the second half and then check if  we have sum equal to zero from two halves. Note, that it can happen that we have already <code class="language-plaintext highlighter-rouge">0</code> in one of two halves, then we return <code class="language-plaintext highlighter-rouge">True</code> in this case immediately. If we do not have zero, than we need to find <code class="language-plaintext highlighter-rouge">el</code> from first half, such that <code class="language-plaintext highlighter-rouge">-el</code> in second half and also <code class="language-plaintext highlighter-rouge">el</code> is not equal to sum of elements in first half.</p>

<h4 id="complexity">Complexity</h4>
<p>Time and space complexity is <code class="language-plaintext highlighter-rouge">O(2^{N/2})</code>.</p>

<h4 id="code">Code</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">splitArraySameAverage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">A</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">sums</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">arr</span><span class="p">:</span> <span class="k">return</span> <span class="p">{}</span>
            <span class="n">out</span> <span class="o">=</span> <span class="p">{</span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]}</span>
            <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span> 
                <span class="n">out</span> <span class="o">=</span> <span class="p">{</span><span class="n">z</span> <span class="o">+</span> <span class="n">l</span> <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">out</span><span class="p">}</span> <span class="o">|</span> <span class="n">out</span> <span class="o">|</span> <span class="p">{</span><span class="n">l</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">out</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="k">return</span> <span class="bp">False</span>
        
        <span class="n">n</span><span class="p">,</span> <span class="n">S</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">),</span> <span class="nb">sum</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
        <span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="n">z</span><span class="o">*</span><span class="n">n</span> <span class="o">-</span> <span class="n">S</span> <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">A</span><span class="p">]</span>
        <span class="n">part1</span><span class="p">,</span> <span class="n">part2</span> <span class="o">=</span> <span class="n">sums</span><span class="p">(</span><span class="n">A</span><span class="p">[:</span><span class="n">n</span><span class="o">//</span><span class="mi">2</span><span class="p">]),</span> <span class="n">sums</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">n</span><span class="o">//</span><span class="mi">2</span><span class="p">:])</span>
        <span class="n">sum1</span><span class="p">,</span> <span class="n">sum2</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">A</span><span class="p">[:</span><span class="n">n</span><span class="o">//</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">sum</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">n</span><span class="o">//</span><span class="mi">2</span><span class="p">:])</span>
    
        <span class="k">if</span> <span class="mi">0</span> <span class="ow">in</span> <span class="n">part1</span> <span class="ow">or</span> <span class="mi">0</span> <span class="ow">in</span> <span class="n">part2</span><span class="p">:</span> <span class="k">return</span> <span class="bp">True</span>

        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">part1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">el</span> <span class="o">!=</span> <span class="n">sum1</span> <span class="ow">and</span> <span class="o">-</span><span class="n">el</span> <span class="ow">in</span> <span class="n">part2</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>
        
        <span class="k">return</span> <span class="bp">False</span>
</code></pre></div></div>

<h4 id="solution-2">Solution 2</h4>
<p>There is another <code class="language-plaintext highlighter-rouge">O(n^2 * m)</code> solution, using classical dp: in <code class="language-plaintext highlighter-rouge">sums[i]</code> we will keep all possible sums if we allowed to use exaclty <code class="language-plaintext highlighter-rouge">i</code> elements.</p>

<h4 id="complexity-1">Complexity</h4>
<p>It is <code class="language-plaintext highlighter-rouge">O(n^2 * m)</code> for time and <code class="language-plaintext highlighter-rouge">O(n*m)</code> space.</p>

<h4 id="code-1">Code 1</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">splitArraySameAverage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">A</span><span class="p">):</span>
        <span class="n">sums</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
        <span class="n">sums</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">add</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">sums</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span> <span class="n">sums</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">].</span><span class="n">add</span><span class="p">(</span><span class="n">elem</span> <span class="o">+</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">*</span><span class="n">j</span> <span class="o">%</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">sum</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">*</span><span class="n">j</span><span class="o">//</span><span class="n">n</span> <span class="ow">in</span> <span class="n">sums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
</code></pre></div></div>

<h4 id="code-2">Code 2</h4>
<p>The same idea can be implemented using binary masks, see Problem <strong>0416</strong> Partition Equal Subset Sum with similar idea.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#### borrowed code
</span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">splitArraySameAverage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">A</span><span class="p">):</span>
    		<span class="n">N</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">P</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">),</span> <span class="nb">sum</span><span class="p">(</span><span class="n">A</span><span class="p">),</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    		<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">A</span><span class="p">:</span> <span class="n">P</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="p">[(</span><span class="n">p</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">)</span> <span class="o">|</span> <span class="n">q</span> <span class="k">for</span> <span class="n">p</span><span class="p">,</span> <span class="n">q</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="n">P</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
    		<span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">S</span> <span class="o">*</span> <span class="n">n</span> <span class="o">%</span> <span class="n">N</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">P</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">S</span> <span class="o">*</span> <span class="n">n</span> <span class="o">//</span> <span class="n">N</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">N</span><span class="p">))</span>
</code></pre></div></div>


  </div><a class="u-url" href="/leetcode/0805.html" hidden></a>
</article>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">Dmitry Babichev</li>
          <li><a class="u-email" href="mailto:dimitry008@gmail.com">dimitry008@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Here you can find solution to some algorithmic problems, at the moment it is mainly leetcode problems.
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>